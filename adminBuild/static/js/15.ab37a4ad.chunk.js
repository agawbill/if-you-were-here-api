(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[15],{102:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n(104),c=n.n(l);t.a=function(){return r.a.createElement("div",{className:c.a.loader})}},104:function(e,t,n){e.exports={loader:"FormSpinner_loader__1L2La",load1:"FormSpinner_load1__NnjDF"}},109:function(e,t,n){"use strict";var a=n(0),r=n.n(a),l=n(112),c=n(54),s=n(102),o=n(18);t.a=function(e){var t=Object(o.c)((function(e){return e.person.personSuccess})),n=Object(o.c)((function(e){return e.message.messageSuccess})),a=Object(o.c)((function(e){return e.resource.deleteResourceSuccess})),u=Object(o.c)((function(e){return e.person.deleteLoading})),i=Object(o.c)((function(e){return e.resource.deleteLoading})),d=Object(o.c)((function(e){return e.message.deleteLoading})),m=Object(o.c)((function(e){return e.message.error})),p=Object(o.c)((function(e){return e.person.error})),g=Object(o.c)((function(e){return e.resource.error})),f="Understood",E="primary";return u||i||d?f=r.a.createElement(s.a,null):t||a||n?(E="success",f="Deleted"):(p||g||m)&&(E="danger",f="Failed"),r.a.createElement(l.a,{show:e.show,onHide:e.cancelHandler,backdrop:"static",keyboard:!1},r.a.createElement(l.a.Header,{closeButton:!0},r.a.createElement(l.a.Title,null,e.title)),r.a.createElement(l.a.Body,null,e.children),r.a.createElement(l.a.Footer,null,r.a.createElement(c.a,{variant:"secondary",onClick:function(){return e.cancelHandler()}},"Close"),r.a.createElement(c.a,{variant:E,onClick:function(){return e.acceptHandler(e.itemId,e.type)}},f)))}},139:function(e,t,n){e.exports={link:"MessagesPage_link__1D2ix",selected:"MessagesPage_selected__2XSqc",validations:"MessagesPage_validations__1BQzg",success:"MessagesPage_success__2k103"}},152:function(e,t,n){e.exports={Message:"Message_Message__1KuaF",MessageDate:"Message_MessageDate__zGEFi",MessageAttribute:"Message_MessageAttribute__2zeAW",MessageMessage:"Message_MessageMessage__378u6",Flag:"Message_Flag__1O7Ji",Icons:"Message_Icons__14Y_b",Icon:"Message_Icon__zZ5YE"}},157:function(e,t,n){e.exports={SortOption:"SortOption_SortOption__188pk",SortOptionSelected:"SortOption_SortOptionSelected__2QOAw"}},196:function(e,t,n){"use strict";n.r(t);var a=n(40),r=n(0),l=n.n(r),c=n(18),s=n(139),o=n.n(s),u=n(4),i=n.n(u),d=n(6),m=n(22),p=n(109),g=n(140),f=n.n(g),E=n(10),b=n(152),y=n.n(b),O=n(54),v=n(41),j=n(107),M=n(103),_=Object(E.h)((function(e){var t=Object(r.useState)(100),n=Object(a.a)(t,2),s=n[0],o=n[1],u=Object(c.c)((function(e){return e.auth.user})),i=Object(c.c)((function(e){return e.auth.token})),d=Object(c.c)((function(e){return e.message.approveLoading})),m=e.approveHandler,p=function(t){e.history.push({pathname:"messages/".concat(t),passedMessage:e.entry})},g=new Date(e.entry.createdAt).toDateString(),E=e.entry.flagged?l.a.createElement(j.a,{icon:M.d,size:"lg"}):null,b=null;b="pending"===e.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{variant:"success",onClick:function(){return m({id:e.entry._id,user:u,token:i})},className:y.a.Icon},"Approve"),l.a.createElement(O.a,{onClick:function(){return p(e.entry._id)},className:y.a.Icon,variant:"secondary"},"Edit"),l.a.createElement(O.a,{onClick:function(){return e.deleteHandler(e.entry._id)},className:y.a.Icon,variant:"danger"},"Delete"),l.a.createElement("span",{className:y.a.Flag},E)):l.a.createElement(l.a.Fragment,null,l.a.createElement(O.a,{onClick:function(){return p(e.entry._id)},className:y.a.Icon,variant:"secondary"},"Edit"),l.a.createElement(O.a,{onClick:function(){return e.deleteHandler(e.entry._id)},className:y.a.Icon,variant:"danger"},"Delete"));var _=d?l.a.createElement(v.a,null):l.a.createElement("div",{className:y.a.Message,onClick:function(){return t=e.entry.message.length,void o(s===t?100:t);var t}},l.a.createElement("div",{className:y.a.Icons},b),l.a.createElement("p",null,"To my"," ",l.a.createElement("span",{className:y.a.MessageAttribute}," ",e.entry.who.name),",",l.a.createElement("br",null),l.a.createElement("span",{className:y.a.MessageDate},g)),l.a.createElement("span",{className:y.a.MessageMessage},f()(function(e,t){var n=e.split(" ");if(n.length<=t)return e;var a=n[t-1].split("").slice(-1)[0];return-1!==[".","!",",","?",";",":","&"].indexOf(a)?"".concat(n.slice(0,t+1).join(" "),"..."):"".concat(n.slice(0,t).join(" "),"...")}(e.entry.message,s))),l.a.createElement("p",null,"From your"," ",l.a.createElement("span",{className:y.a.MessageAttribute},e.entry.identity.name)));return l.a.createElement(l.a.Fragment,null,_)})),k=function(e){var t=null;return e.show&&(t=l.a.createElement(O.a,{onClick:function(){return e.loadMoreMessages(14)}},"LOAD MORE")),t},S=n(110),h=function(e){var t=Object(r.useState)(14),n=Object(a.a)(t,2),c=n[0],s=n[1],o=Object(r.useState)(14),u=Object(a.a)(o,2),i=u[0],d=u[1],m=Object(r.useState)(14),p=Object(a.a)(m,2),g=p[0],f=p[1],E=Object(r.useState)(14),b=Object(a.a)(E,2),y=b[0],O=b[1],v=e.filteredMessages?e.filteredMessages.length-i:null,j=e.messages?e.messages.length-c:null,M=e.filteredMessages?e.filteredMessages.length-y:null,h=e.messages?e.messages.length-g:null,H=function(t){if("pending"===e.type){var n=v>=t?t:v;d((function(e){return e+n}))}else{var a=M>=t?t:M;O((function(e){return e+a}))}},N=function(t){if("pending"===e.type){var n=j>=t?t:j;s((function(e){return e+n}))}else{var a=h>=t?t:h;f((function(e){return e+a}))}},C=null,F=null;if(e.filteredMessages&&e.filteredMessages.length>14){C="pending"===e.type?l.a.createElement(k,{show:v>0,loadMoreMessages:H}):l.a.createElement(k,{show:M>0,loadMoreMessages:H});var w="pending"===e.type?i:y;F=e.filteredMessages.slice(14,w).map((function(t,n){return l.a.createElement("span",{key:n},l.a.createElement(S.a.Item,{style:{borderColor:t.flagged?"red":null}},l.a.createElement(_,{key:n,entry:t,marker:n+14,deleteHandler:e.deleteHandler,approveHandler:e.approveHandler,type:e.type})),l.a.createElement("br",null))}))}else if(e.messages&&e.messages.length>14){C="pending"===e.type?l.a.createElement(k,{show:j>0,loadMoreMessages:N}):l.a.createElement(k,{show:h>0,loadMoreMessages:N});var I="pending"===e.type?c:g;F=e.messages.slice(14,I).map((function(t,n){return l.a.createElement("span",{key:n},l.a.createElement(S.a.Item,{style:{borderColor:t.flagged?"red":null}},l.a.createElement(_,{key:n,entry:t,marker:n+14,deleteHandler:e.deleteHandler,approveHandler:e.approveHandler,type:e.type})),l.a.createElement("br",null))}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(S.a,null,F),l.a.createElement("center",null,C),l.a.createElement("br",null))},H=function(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),s=n[0],o=n[1],u=Object(r.useState)(null),g=Object(a.a)(u,2),f=g[0],E=g[1],b=Object(c.c)((function(e){return e.auth.token})),y=e.type,O=e.filteredApproved,v=e.pendingMessages,j=e.filteredPending,M=e.approvedMessages,k=Object(c.b)(),H=function(e){E(e),k(Object(m.u)()),o(!0)},N=function(){var e=Object(d.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(Object(m.m)(t,b));case 2:return e.next=4,k(Object(m.D)());case 4:"pending"===n?k(Object(m.R)()):"approved"===n&&k(Object(m.Q)()),o(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(Object(m.j)(t));case 2:return e.next=4,k(Object(m.D)());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=null,w=null;"pending"===y?(w=l.a.createElement(h,{messages:v,filteredMessages:j,approveHandler:C,type:y}),F=j.length>0?j.slice(0,14).map((function(e,t){return l.a.createElement("span",{key:t},l.a.createElement(S.a.Item,{style:{borderColor:e.flagged?"red":null}},l.a.createElement(_,{entry:e,deleteHandler:H,approveHandler:C,type:y})),l.a.createElement("br",null))})):v&&v.length>0?v.slice(0,14).map((function(e,t){return l.a.createElement("span",{key:t},l.a.createElement(S.a.Item,{style:{borderColor:e.flagged?"red":null}},l.a.createElement(_,{entry:e,type:y,deleteHandler:H,approveHandler:C})),l.a.createElement("br",null))})):"No pending messages yet"):"approved"===y&&(w=l.a.createElement(h,{messages:M,filteredMessages:O,deleteHandler:H,approveHandler:C,type:y}),F=O.length>0?O.slice(0,14).map((function(e,t){return l.a.createElement("span",{key:t},l.a.createElement(S.a.Item,{style:{borderColor:e.flagged?"red":null}},l.a.createElement(_,{entry:e,type:y,deleteHandler:H,approveHandler:C})),l.a.createElement("br",null))})):M&&M.length>0?M.slice(0,14).map((function(e,t){return l.a.createElement("span",{key:t},l.a.createElement(S.a.Item,{style:{borderColor:e.flagged?"red":null}},l.a.createElement(_,{entry:e,type:y,deleteHandler:H,approveHandler:C})),l.a.createElement("br",null))})):"No approved messages yet");var I=l.a.createElement(l.a.Fragment,null,"Are you sure you want to delete this item?");return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{show:s,itemId:f,cancelHandler:function(){o(!1)},acceptHandler:N,type:y,title:"Delete"},I),l.a.createElement(S.a,null,F),w)},N=n(157),C=n.n(N),F=function(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),s=n[0],o=n[1],u=Object(c.c)((function(e){return e.messages.sort})),i=Object(c.b)(),d=e.filter,p=e.sortHandler,g=e.sortSelected,f=e.name;return Object(r.useEffect)((function(){"pending"===f?s||u!==d?s&&i(Object(m.f)(d)):i(Object(m.N)(d)):s||u!==d?s&&i(Object(m.e)(d)):i(Object(m.M)(d))}),[s]),Object(r.useEffect)((function(){g!==d&&o(!1)}),[g]),l.a.createElement("div",{className:s?C.a.SortOptionSelected:C.a.SortOption,onClick:function(){return function(e){o((function(e){return!e})),p(e,f)}(d)}},e.filter)},w=n(55),I=n(101),x=n(108),A=function(e){var t=Object(r.useState)(null),n=Object(a.a)(t,2),c=n[0],s=n[1],o=Object(r.useState)(null),u=Object(a.a)(o,2),i=u[0],d=u[1],m=function(e,t){"pending"===t?s(c===e?null:e):d(i===e?null:e)},p=["Newest","Oldest","Flagged"].map((function(e,t,n){return t===n.length-1?l.a.createElement(F,{key:t,sortHandler:m,sortSelected:c,filter:e,name:"pending"}):l.a.createElement("span",{key:t},l.a.createElement(F,{key:t,sortHandler:m,sortSelected:c,filter:e,name:"pending"})," ","-"," ")})),g=["Newest","Oldest"].map((function(e,t,n){return t===n.length-1?l.a.createElement(F,{key:t,sortHandler:m,sortSelected:i,filter:e,name:"approved"}):l.a.createElement("span",{key:t},l.a.createElement(F,{sortHandler:m,sortSelected:i,filter:e,name:"approved"})," ","-"," ")})),f=null;return f="pending"===e.type?l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{icon:M.b,size:"1x",style:{color:"gray"}})," ",l.a.createElement("b",null,"Order By:")," ",p):l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{icon:M.b,size:"1x",style:{color:"gray"}})," ",l.a.createElement("b",null,"Order By:")," ",g),l.a.createElement(x.a,null,l.a.createElement(I.a,{lg:4},l.a.createElement(w.a,null,f)))},D=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(A,{type:e.type}))},P=n(106);t.default=function(){var e=Object(r.useState)("pending"),t=Object(a.a)(e,2),n=t[0],s=t[1],u=Object(c.c)((function(e){return e.message.approveSuccess})),i=Object(c.c)((function(e){return e.message.deleteSuccess})),d=Object(c.c)((function(e){return e.messages.pendingMessages})),p=Object(c.c)((function(e){return e.messages.filteredPending})),g=Object(c.c)((function(e){return e.messages.approvedMessages})),f=Object(c.c)((function(e){return e.messages.filteredApproved})),E=Object(c.c)((function(e){return e.message.error})),b=Object(c.b)();Object(r.useEffect)((function(){return function(){b(Object(m.k)()),b(Object(m.n)())}}),[b]);var y=function(e){s(e),b(Object(m.S)())},O=[o.a.link,o.a.link],v=O[0],j=O[1];if("pending"===n){var M=[o.a.selected,o.a.link];v=M[0],j=M[1]}else if("approved"===n){var _=[o.a.link,o.a.selected];v=_[0],j=_[1]}return l.a.createElement(w.a,null,l.a.createElement(P.a,null,l.a.createElement("center",null,l.a.createElement("h1",null,"Messages"),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("span",{className:v,onClick:function(){return y("pending")}},"Pending")," ","|"," ",l.a.createElement("span",{className:j,onClick:function(){return y("approved")}},"Approved"))),l.a.createElement("br",null),l.a.createElement(D,{type:n}),l.a.createElement("br",null),l.a.createElement("center",null,l.a.createElement("span",{className:o.a.validations},E),l.a.createElement("span",{className:o.a.success},u?"SUCCESS! Message approved.":null,i?"SUCCESS! Message removed.":null))),l.a.createElement(H,{pendingMessages:d,approvedMessages:g,filteredApproved:f,filteredPending:p,type:n}))}}}]);
//# sourceMappingURL=15.ab37a4ad.chunk.js.map